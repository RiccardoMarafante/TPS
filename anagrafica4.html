<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Anagrafica 4.0</title>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f2f2f2;
  margin: 20px;
}
h2 {
  color: #333;
}
form {
  background-color: #fff;
  padding: 20px;
  border-radius: 8px;
  max-width: 500px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
input[type=text], input[type=number], select {
  width: 95%;
  padding: 5px;
  margin: 5px 0 15px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
}
button {
  padding: 8px 12px;
  margin: 5px 5px 5px 0;
  border: none;
  border-radius: 4px;
  background-color: #4CAF50;
  color: white;
  cursor: pointer;
}
button:hover {
  background-color: #45a049;
}
label {
  font-weight: bold;
}
</style>
</head>
<body>

<h2>Inserisci i dati anagrafici</h2>

<form id="anagraficaForm">
  Nome: <input type="text" id="nome"><br>
  Cognome: <input type="text" id="cognome"><br>
  Indirizzo: <input type="text" id="indirizzo"><br>
  Citt√†: <input type="text" id="citta"><br>
  CAP: <input type="text" id="cap"><br>
  Anno di nascita: <input type="number" id="annoNascita"><br>

  <label>Sesso:</label><br>
  <input type="radio" name="sesso" id="sessoM" value="Maschio"> Maschio
  <input type="radio" name="sesso" id="sessoF" value="Femmina"> Femmina
  <input type="radio" name="sesso" id="sessoA" value="Altro"> Altro
  <br><br>

  <label>Provincia:</label><br>
  <select id="provincia">
    <option value="">-- Seleziona provincia --</option>
    <option value="MI">Milano</option>
    <option value="RM">Roma</option>
    <option value="NA">Napoli</option>
    <option value="TO">Torino</option>
    <option value="FI">Firenze</option>
  </select>
  <br><br>

  <label>Mezzi posseduti:</label><br>
  <input type="checkbox" id="auto" value="Auto"> Auto
  <input type="checkbox" id="moto" value="Moto"> Moto
  <input type="checkbox" id="bici" value="Bici"> Bici
  <input type="checkbox" id="aereo" value="Aereo"> Aereo
  <input type="checkbox" id="yacht" value="Yacht"> Yacht
  <br><br>

  <label>Materie preferite:</label><br>
  <select id="materie" multiple size="5">
    <option value="Matematica">Matematica</option>
    <option value="Italiano">Italiano</option>
    <option value="Inglese">Inglese</option>
    <option value="Storia">Storia</option>
    <option value="Scienze">Scienze</option>
  </select>
  <br><br>

  <button type="button" onclick="aggiungiPersona()">Aggiungi persona</button>
  <button type="button" onclick="vaiAllaStampa()">Vai alla stampa</button>
  <button type="button" onclick="resetDati()">Reset dati</button>
</form>

<script>
let persone = JSON.parse(localStorage.getItem("persone")) || [];

function aggiungiPersona() {
  let numero = persone.length + 1;
  let persona = {
    indice: numero<10?"0"+numero:numero,
    nome: document.getElementById("nome").value,
    cognome: document.getElementById("cognome").value,
    indirizzo: document.getElementById("indirizzo").value,
    citta: document.getElementById("citta").value,
    cap: document.getElementById("cap").value,
    annoNascita: parseInt(document.getElementById("annoNascita").value),
    eta: 2025 - parseInt(document.getElementById("annoNascita").value),
    generazione: "",
    sesso: document.getElementById("sessoM").checked ? "Maschio" :
           document.getElementById("sessoF").checked ? "Femmina" :
           document.getElementById("sessoA").checked ? "Altro" : "",
    provincia: document.getElementById("provincia").value,
    mezzi: "",
    materie: ""
  };
  if(persona.annoNascita >= 1997) persona.generazione="Generazione Z";
  else if(persona.annoNascita >= 1981) persona.generazione="Millennials";
  else persona.generazione="Altro";

  if(document.getElementById("auto").checked) persona.mezzi+="Auto ";
  if(document.getElementById("moto").checked) persona.mezzi+="Moto ";
  if(document.getElementById("bici").checked) persona.mezzi+="Bici ";
  if(document.getElementById("aereo").checked) persona.mezzi+="Aereo ";
  if(document.getElementById("yacht").checked) persona.mezzi+="Yacht ";

  let lista = document.getElementById("materie");
  for(let i=0;i<lista.options.length;i++){
    if(lista.options[i].selected) persona.materie+=lista.options[i].value+" ";
  }

  persone.push(persona);
  localStorage.setItem("persone", JSON.stringify(persone));
  alert("Persona aggiunta correttamente!");
}

function vaiAllaStampa() {
  let indici = persone.map(p=>p.indice).join(",");
  window.location.href="stampa.html?indici="+indici;
}

function resetDati() {
  localStorage.removeItem("persone");
  persone=[];
  alert("Dati cancellati, puoi ricominciare!");
}
</script>

</body>
</html>
