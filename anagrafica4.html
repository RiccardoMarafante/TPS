<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Anagrafica 4.0</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background: #eef2f3; color: #2c3e50; }
    h2 { text-align: center; }
    form { max-width: 600px; margin: auto; padding: 25px; background: #fff; border-radius: 12px; }
    label { display: block; margin-top: 15px; }
    input, select { width: 100%; padding: 8px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>

<h2>Inserisci i dati anagrafici</h2>

<form id="anagraficaForm">
  Nome: <input type="text" id="nome"><br>
  Cognome: <input type="text" id="cognome"><br>
  Indirizzo: <input type="text" id="indirizzo"><br>
  Citt√†: <input type="text" id="citta"><br>
  CAP: <input type="text" id="cap"><br>
  Anno di nascita: <input type="number" id="annoNascita"><br>
  <label>Sesso:</label>
  <input type="radio" name="sesso" id="sessoM" value="Maschio">Maschio
  <input type="radio" name="sesso" id="sessoF" value="Femmina">Femmina
  <input type="radio" name="sesso" id="sessoA" value="Altro">Altro<br>
  <label>Provincia:</label>
  <select id="provincia">
    <option value="">-- Seleziona provincia --</option>
    <option value="MI">Milano</option>
    <option value="RM">Roma</option>
    <option value="NA">Napoli</option>
    <option value="TO">Torino</option>
    <option value="FI">Firenze</option>
  </select>
  <label>Mezzi posseduti:</label>
  <input type="checkbox" id="auto" value="Auto">Auto
  <input type="checkbox" id="moto" value="Moto">Moto
  <input type="checkbox" id="bici" value="Bici">Bici
  <input type="checkbox" id="aereo" value="Aereo">Aereo
  <input type="checkbox" id="yacht" value="Yacht">Yacht<br>
  <label>Materie preferite:</label>
  <select id="materie" multiple size="6">
    <option value="Matematica">Matematica</option>
    <option value="Italiano">Italiano</option>
    <option value="Inglese">Inglese</option>
    <option value="Storia">Storia</option>
    <option value="Geografia">Geografia</option>
    <option value="Scienze">Scienze</option>
  </select>
  <button type="button" onclick="aggiungiPersona()">Aggiungi Persona</button>
  <button type="button" onclick="vaiAllaStampa()">Vai alla Stampa</button>
</form>

<div id="risultato"></div>

<script>
let persone = JSON.parse(localStorage.getItem("persone")) || [];

function aggiungiPersona() {
  let persona = {
    nome: document.getElementById("nome").value,
    cognome: document.getElementById("cognome").value,
    indirizzo: document.getElementById("indirizzo").value,
    citta: document.getElementById("citta").value,
    cap: document.getElementById("cap").value,
    annoNascita: parseInt(document.getElementById("annoNascita").value),
    eta: 2025 - parseInt(document.getElementById("annoNascita").value),
    generazione: "",
    sesso: document.getElementById("sessoM").checked ? "Maschio" :
           document.getElementById("sessoF").checked ? "Femmina" :
           document.getElementById("sessoA").checked ? "Altro" : "",
    provincia: document.getElementById("provincia").value,
    mezzi: "",
    materie: ""
  };

  if (persona.annoNascita >= 2013) persona.generazione="Generazione Alpha";
  else if(persona.annoNascita>=1997) persona.generazione="Generazione Z";
  else if(persona.annoNascita>=1981) persona.generazione="Millennials";
  else if(persona.annoNascita>=1965) persona.generazione="Generazione X";
  else if(persona.annoNascita>=1946) persona.generazione="Baby Boomers";
  else persona.generazione="Generazione Silenziosa";

  if(document.getElementById("auto").checked) persona.mezzi+="Auto ";
  if(document.getElementById("moto").checked) persona.mezzi+="Moto ";
  if(document.getElementById("bici").checked) persona.mezzi+="Bici ";
  if(document.getElementById("aereo").checked) persona.mezzi+="Aereo ";
  if(document.getElementById("yacht").checked) persona.mezzi+="Yacht ";

  let listaMaterie = document.getElementById("materie");
  for(let i=0;i<listaMaterie.options.length;i++){
    if(listaMaterie.options[i].selected) persona.materie+=listaMaterie.options[i].value+", ";
  }

  persone.push(persona);
  localStorage.setItem("persone", JSON.stringify(persone));
  alert("Persona aggiunta correttamente!");
}

function vaiAllaStampa() {
  let indici = persone.map(p=>p.indice).join(",");
  window.location.href = "stampa.html?indici="+indici;
}
</script>

</body>
</html>
